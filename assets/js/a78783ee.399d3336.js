"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4220],{6912:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>c,toc:()=>a});var s=t(7624),r=t(2172);const o={id:"advanced-features",title:"Advanced usage"},i=void 0,c={id:"advanced-features",title:"Advanced usage",description:"In this section we discuss how to use Infer if you wish to make contributions to",source:"@site/versioned_docs/version-1.0.0/01-advanced-features.md",sourceDirName:".",slug:"/advanced-features",permalink:"/docs/1.0.0/advanced-features",draft:!1,unlisted:!1,tags:[],version:"1.0.0",sidebarPosition:1,frontMatter:{id:"advanced-features",title:"Advanced usage"},sidebar:"docs",previous:{title:"Recommended flow for CI",permalink:"/docs/1.0.0/steps-for-ci"},next:{title:"infer",permalink:"/docs/1.0.0/man-infer"}},l={},a=[{value:"Structure of the results folder",id:"structure-of-the-results-folder",level:2},{value:"Captured folder",id:"captured-folder",level:3},{value:"Debug mode",id:"debug-mode",level:2},{value:"Print the specs",id:"print-the-specs",level:2},{value:"Run internal tests",id:"run-internal-tests",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"In this section we discuss how to use Infer if you wish to make contributions to\nit or just look under the hood to learn more about how it is working. There are,\nfor instance, debug options and ways to obtain the specs from the methods."}),"\n",(0,s.jsx)(n.h2,{id:"structure-of-the-results-folder",children:"Structure of the results folder"}),"\n",(0,s.jsxs)(n.p,{children:["After a successful Infer run, a directory is created to store the results of the\nanalysis. By default this directory is called ",(0,s.jsx)(n.code,{children:"infer-out"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"infer-out\n\u251c\u2500\u2500 captured/\n\u251c\u2500\u2500 log/\n\u251c\u2500\u2500 specs/\n\u251c\u2500\u2500 report.json\n\u251c\u2500\u2500 report.txt\n\u251c\u2500\u2500 toplevel.log\n\u2514\u2500\u2500 ...\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"captured/"})," contains information for each file analyzed by Infer. See\n",(0,s.jsx)(n.a,{href:"advanced-features#captured-folder",children:"below"})," for more information."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"specs/"})," contains the ",(0,s.jsx)(n.a,{href:"advanced-features#print-the-specs",children:"specs"})," of each\nfunction that was analyzed, as inferred by Infer."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"log/"})," and toplevel.log contains logs"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"report.txt"})," and ",(0,s.jsx)(n.code,{children:"report.json"})," contain the Infer reports in text and JSON\nformats"]}),"\n",(0,s.jsx)(n.li,{children:"there are other folders reserved for Infer's internal workings"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"captured-folder",children:"Captured folder"}),"\n",(0,s.jsxs)(n.p,{children:["Inside the folder ",(0,s.jsx)(n.code,{children:"infer-out/captured"})," there is a folder for each captured file.\nAssume we captured a file called ",(0,s.jsx)(n.code,{children:"example.c"}),". Then, Infer creates the following\nfiles inside the folder ",(0,s.jsx)(n.code,{children:"infer-out/captured/example.c/"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"example.c.cfg"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"example.c.cg"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"example.c.tenv"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The files ",(0,s.jsx)(n.code,{children:".cfg"}),", ",(0,s.jsx)(n.code,{children:".cg"})," and ",(0,s.jsx)(n.code,{children:".tenv"})," contain the intermediate representation of\nthat file. This data is passed to the backend of Infer, which then performs the\nanalysis. The files contain serialized OCaml data structures. The ",(0,s.jsx)(n.code,{children:".cfg"})," file\ncontains a control flow graph for each function or method implemented in the\nfile. The file ",(0,s.jsx)(n.code,{children:".cg"})," contains the call graph of the functions defined or called\nfrom that file. Finally, the file ",(0,s.jsx)(n.code,{children:".tenv"})," contains all the types that are\ndefined or used in the file."]}),"\n",(0,s.jsx)(n.h2,{id:"debug-mode",children:"Debug mode"}),"\n",(0,s.jsxs)(n.p,{children:["With the debug option enabled ",(0,s.jsx)(n.code,{children:"infer run --debug -- <build command>"}),", Infer\noutputs debug information in infer-out/log/. The option ",(0,s.jsx)(n.code,{children:"--stats"})," provides only\nlight debug information, and ",(0,s.jsx)(n.code,{children:"--print-logs"})," outputs every message on the console\nas well as in the log files."]}),"\n",(0,s.jsxs)(n.p,{children:["In each captured folder, we obtain the file ",(0,s.jsx)(n.code,{children:"icfg.dot"}),", which is the graphical\nrepresentation of the file ",(0,s.jsx)(n.code,{children:".cfg"})," and the file ",(0,s.jsx)(n.code,{children:"call_graph.dot"}),", that is the\ngraphical representation of the call graph."]}),"\n",(0,s.jsxs)(n.p,{children:["Moreover, we obtain an HTML page for each captured file inside\n",(0,s.jsx)(n.code,{children:"infer-out/captured"}),". This HTML file contains the source file. In each line of\nthe file there are links to the nodes of the control flow graph that correspond\nto that line of code. So one can see what the translation looks like. Moreover,\nwhen you click on those links you can see details of the symbolic execution of\nthat particular node."]}),"\n",(0,s.jsx)(n.h2,{id:"print-the-specs",children:"Print the specs"}),"\n",(0,s.jsxs)(n.p,{children:["It is also possible to print the specs created by Infer using the subcommand\n",(0,s.jsx)(n.code,{children:"infer report"}),". You can print one particular spec that corresponds to one\nmethod, or you can print all the specs in the results directory. Let us look at\nan example:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"class Hello {\n    int x;\n    void setX(int newX) {\n\t    this.x = newX;\n    }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"We run Infer on this example with:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"infer run -- javac Hello.java\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Infer saves the spec for the method ",(0,s.jsx)(n.code,{children:"setX"})," in ",(0,s.jsx)(n.code,{children:"infer-out/specs"})," and we can print\nit with the command:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"infer report infer-out/specs/Hello.setX{98B5}:void.specs\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The convention for method names in Java is ",(0,s.jsx)(n.code,{children:"<class name>.<method name>"}),". This\noutputs the following:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"Procedure: void Hello.setX(int)\nvoid void Hello.setX(int)(class Hello *this, int newX)\nTimestamp: 1\nStatus: INACTIVE\nPhase: RE_EXECUTION\nDependency_map:\nTIME:0.006893 s TIMEOUT:N SYMOPS:34 CALLS:0,0\nERRORS:\n--------------------------- 1 of 1 [nvisited: 4 5 6] ---------------------------\nPRE:\nthis = val$1: ;\nnewX = val$3: ;\nthis|->{Hello.x:val$2}:\nPOST 1 of 1:\nthis = val$1: ;\nreturn = val$4: ;\nnewX = val$3: ;\nthis|->{Hello.x:newX}:\n----------------------------------------------------------------\n"})}),"\n",(0,s.jsxs)(n.p,{children:["which expresses the fact that ",(0,s.jsx)(n.code,{children:"this"})," needs to be allocated at the beginning of\nthe method, and that at the end of the method the field ",(0,s.jsx)(n.code,{children:"x"})," is equal to ",(0,s.jsx)(n.code,{children:"newX"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Moreover, you can print all the specs in the results directory with the command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"infer report\n"})}),"\n",(0,s.jsx)(n.h2,{id:"run-internal-tests",children:"Run internal tests"}),"\n",(0,s.jsxs)(n.p,{children:["There are many tests in the Infer code base that check that Infer behaves\ncorrectly on small program examples. This is how you'd typically run the tests;\nyou can adapt the figure ",(0,s.jsx)(n.code,{children:"8"})," depending on the number of cores available on your\nmachine:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"make -j8 test\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.M)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},2172:(e,n,t)=>{t.d(n,{I:()=>c,M:()=>i});var s=t(1504);const r={},o=s.createContext(r);function i(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);